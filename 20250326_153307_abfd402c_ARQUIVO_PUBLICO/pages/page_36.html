<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validação: ERNESTO SILVA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding-top: 20px; padding-bottom: 50px; }
        .validation-card { margin-bottom: 20px; }
        .error-details { 
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            white-space: pre-wrap;
        }
        .navbar { position: fixed; bottom: 0; width: 100%; z-index: 100; }
        .approval-btn { margin-top: 15px; }
        .nav-bottom { 
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #f8f9fa;
            border-top: 1px solid #ddd;
            padding: 10px 0;
            z-index: 1000;
        }
        .page-container { margin-bottom: 60px; }
    </style>
</head>
<body>
    <div class="container page-container">

        <h1 class="mb-4">Detalhes da Validação</h1>
        <div class="card validation-card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">ERNESTO SILVA</h5>
                <span id="pageStatusBadge" class="badge bg-danger">Inválida</span>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>URL Original:</strong> 
                        <a href="https://www.arquivopublico.df.gov.br/ernesto-silva-2" target="_blank" class="btn btn-sm btn-outline-primary">https://www.arquivopublico.df.gov.br/ernesto-silva-2</a>
                    </div>
                    <div class="col-md-6">
                        <strong>URL Migrada:</strong> 
                        <a href="https://arquivopublico-hml.df.gov.br:8443/ernesto-silva-2" target="_blank" class="btn btn-sm btn-outline-primary">https://arquivopublico-hml.df.gov.br:8443/ernesto-silva-2</a>
                    </div>
                </div>
                
                <div class="mb-3">
                    <strong>Timestamp:</strong> 2025-03-25 20:33:10
                </div>
                
                <div class="mb-3">
                    <strong>Scores de Similaridade:</strong>
                    <ul class="list-group">
                        <li class="list-group-item">Conteúdo: 40%</li>
                        <li class="list-group-item">Estrutura: 40%</li>
                    </ul>
                </div>
                
                <h5 class="mt-4 mb-3">Erros Encontrados:</h5>
                <ul class="list-group">
<li class="list-group-item text-danger">Content Mismatch: Conteúdo principal não corresponde ao original (Similaridade: 40.00%):
Alterado de '17' para '20'
Alterado de '1914' para '1918'
Alterado de 'data: 29 de agosto de 1997' para 'datas: 5 de novembro de 1987 e 22 de janeiro de 1988'
Alterado de '1 hora páginas: 21' para '3 horas e 35 minutos degravadas: 138'
Alterado de 'marco aurélio de lemos santos, maria vilar ramalho ramos e tereza eleutério de sousa temas funções' para 'georgete medleg rodrigues e luis carlos lopes temas: o convite e as atividades da comissão de localização da nova capital; o contrato com a donald belcher para seleção do sítio e construção de brasília; a desapropriação de terras em goiás; a candidatura de juscelino kubitschek a presidência da república; salário dos membros da comissão de localização; preparação do edital do concurso do plano piloto; nomeação da diretoria da novacap e a participação da união democrática nacional (udn); os estatutos da novacap; primeira visita de juscelino kubitschek a brasília; destino dos documentos produzidos pelas comissões criadas para transferir a capital brasileira; a revista brasília; papel desempenhado na direção da novacap; importância de brasília; os organogramas da novacap; condições de vida em brasília; a venda de lotes na época da construção; relacionamento entre as construtoras e a novacap; entusiasmo dos trabalhadores na construção de brasília; a morte de bernardo sayão; histórico do convênio entre a novacap e o departamento de segurança pública de goiás; o incidente na pacheco fernandes; os documentos da missão polli coelho; os partidos políticos na construção de brasília; militância política; apoio e oposição a brasília; opinião estrangeira sobre a construção; recursos financeiros utilizados; a construção de brasília no governo juscelino kubitschek; repercussão do escritório de propaganda e expansão comercial do brasil em nova york; os visitantes estrangeiros na nova capital; avaliação da mão-de-obra; critérios para nomeação da diretoria da novacap; os acidentes de trabalho; atuação dos bancos em brasília; os trabalhos da donald belcher no ministério da fazenda; oposição do presidente'
Alterado de 'nacional de imigração e colonização' para 'de arquitetos do brasil (iab) a seleção do projeto de lucio costa; o hino de 67 brasília e a sinfonia da alvorada; os incêndios ocorridos em brasília; cronologia das obras realizadas na nova capital; descrição dos planos de saúde, educação, produção e abastecimento; as empreiteiras que participaram da construção; aspectos da cidade livre (núcleo bandeirante); o inquérito'
Removido: 'controle de migrantes indos para brasília na época de sua construção; invasões: vila amauri, vila sarah kubitschek e sacolândia; concepção de cidades-satélites para a novacap; o surgimento da vila sarah kubitschek e sua transferência para taguatinga; o projeto do plano piloto do urbanista lúcio costa; informações sobre cidades e fazendas da região antes da mudança da capital; razões para a substituição do cargo de prefeito para governador do distrito federal; funções do subprefeito josé maciel de paiva em taguatinga; o'
Alterado de 'e a distribuição de lotes em taguatinga; movimentação política em brasília entre os anos de 1960 e 1964; saúde e educação em taguatinga; considerações sobre: joão' para 'da novacap; marechal pessoa, café filho, segismundo de araújo mello, josé maria alkmim, juscelino kubitschek, israel pinheiro, hugo gouthier, iris meinberg, jales machado, oscar niemeyer, lucio costa, osmar soares dutra, adhemar de barros, josé ludovico de almeida, anísio teixeira, francisco luís de bessa leite,'
Alterado de '102 vital, josé maciel de paiva; altamiro de moura pacheco.' para 'lacerda, adauto cardoso, bilac pinto, aliomar baleeiro e joaquim alfredo da silva tavares. militar e médico pediatra, foi diretor administrativo da novacap. autor dos livros brasília, plano educacional e médico-hospitalar e história de brasília: um sonho, uma esperança, uma realidade.'</li><li class="list-group-item text-danger">HTML Structure Mismatch: Estrutura HTML divergente (Similaridade: 40.00% < 80.0%)</li>
                </ul>
                
                <div class="approval-btn">
                    <button id="approveBtn" class="btn btn-success" onclick="approvePage('page_36')">
                        Aprovar Página
                    </button>
                    <button id="rejectBtn" class="btn btn-danger ms-2" onclick="rejectPage('page_36')">
                        Rejeitar Página
                    </button>
                    <div id="approvalStatus" class="mt-2"></div>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <a href="../index.html" class="btn btn-primary">Voltar para o Dashboard</a>
        </div>
    </div>
    
    <div class="nav-bottom">
        <div class="container">
            <div class="d-flex justify-content-between">
                <span class="text-muted">Validação de migração de páginas</span>
                <span class="text-muted">Gerado em: 26/03/2025 15:33:07</span>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Variáveis de configuração
        const reportId = 'abfd402c';
        const pageId = 'page_36';
        
        // Função para buscar aprovações da API
        async function fetchApprovals() {
            try {
                const response = await fetch(`/api/approvals/${reportId}/${pageId}`);
                if (!response.ok) {
                    throw new Error('Erro ao buscar aprovações');
                }
                return await response.json();
            } catch (error) {
                console.error('Erro:', error);
                return {};
            }
        }
        
        // Função para enviar aprovação para a API
        async function sendApproval(status) {
            try {
                const response = await fetch(`/api/approvals/${reportId}/${pageId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        status: status,
                        user: 'validador'
                    }),
                });
                
                if (!response.ok) {
                    throw new Error('Erro ao enviar aprovação');
                }
                
                return await response.json();
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro ao enviar aprovação. Tente novamente.');
                return null;
            }
        }
        
        // Gerenciamento de aprovação usando a API
        async function approvePage() {
            const result = await sendApproval('approved');
            if (result) {
                updateUI();
                alert("Página aprovada! Esta página aparecerá na seção de páginas aprovadas quando você voltar ao dashboard.");
            }
        }
        
        async function rejectPage() {
            const result = await sendApproval('rejected');
            if (result) {
                updateUI();
            }
        }
        
        async function updateUI() {
            const approval = await fetchApprovals();
            const status = document.getElementById('approvalStatus');
            const approveBtn = document.getElementById('approveBtn');
            const rejectBtn = document.getElementById('rejectBtn');
            const statusBadge = document.getElementById('pageStatusBadge');
            
            if (approval && approval.status) {
                if (approval.status === 'approved') {
                    status.innerHTML = '<div class="alert alert-success">Página aprovada!</div>';
                    statusBadge.textContent = 'Aprovada';
                    statusBadge.classList.remove('bg-danger');
                    statusBadge.classList.add('bg-success');
                    approveBtn.disabled = true;
                    rejectBtn.disabled = false;
                } else {
                    status.innerHTML = '<div class="alert alert-danger">Página rejeitada!</div>';
                    statusBadge.textContent = 'Rejeitada';
                    statusBadge.classList.remove('bg-success');
                    statusBadge.classList.add('bg-danger');
                    approveBtn.disabled = false;
                    rejectBtn.disabled = true;
                }
            } else {
                status.innerHTML = '';
                statusBadge.textContent = 'Inválida';
                statusBadge.classList.remove('bg-success');
                statusBadge.classList.add('bg-danger');
                approveBtn.disabled = false;
                rejectBtn.disabled = false;
            }
        }
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', updateUI);
    </script>
</body>
</html>